<ivysettings>

	<!-- build.mode should be "online" or "offline" -->
	<property name="build.mode" value="online"/>
	
    <settings defaultResolver="${build.mode}" validate="false"/>

    <caches checkUpToDate="false" useOrigin="true" lockStrategy="artifact-lock" default="default-cache">
    	<cache name="default-cache"/>
    	<cache name="temp-cache" basedir="${java.io.tmpdir}/ivy2/cache"/>
    </caches>

    <resolvers>

		<chain name="offline" returnFirst="true">
			<!-- use the cache directly as a repository for builds in offline mode -->    	
	       	<filesystem name="cache" cache="temp-cache" alwaysCheckExactRevision="false" checkmodified="false">
	            <ivy pattern="${ivy.default.ivy.user.dir}/cache/[organisation]/[module](/[branch])/ivy-[revision].xml"/>
	            <artifact pattern="${ivy.default.ivy.user.dir}/cache/[organisation]/[module](/[branch])/[type]s/[artifact]-[revision](-[classifier])(.[ext])"/>
	    	</filesystem>
        </chain>
		
        <chain name="online" returnFirst="true">
	       	<!-- fall back to the beet repository for everything else -->
			<url name="beet-repository" alwaysCheckExactRevision="false" 
				 changingPattern=".*-SNAPSHOT" checkmodified="true">
				<ivy pattern="http://beet.sourceforge.net/ivyrep/[organisation]/[module]/[revision]/ivys/ivy.xml"/>
				<artifact pattern="http://beet.sourceforge.net/ivyrep/[organisation]/[module]/[revision]/[type]s/[artifact].[ext]"/>
			</url>
        </chain>
        
       	<filesystem name="local" alwaysCheckExactRevision="false"
			 		cache="temp-cache" checkmodified="false">
            <artifact pattern="${user.dir}/repository/ivyrep/[organisation]/[module]/[revision]/[type]s/[artifact].[ext]"/>
       	</filesystem>

    </resolvers>
    
</ivysettings>